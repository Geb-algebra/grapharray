

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; GraphArray  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="grapharray package" href="grapharray.html" />
    <link rel="prev" title="Welcome to grapharray’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GraphArray
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Import-Modules">Import Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Define-Variables">Define Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Update-array-values">Update array values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Mathematical-Operations">Mathematical Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Visualizing-Values">Visualizing Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Computational-Efficiency">Computational Efficiency</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="grapharray.html">grapharray package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GraphArray</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Usage">
<h1>Usage<a class="headerlink" href="#Usage" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial we use <a class="reference external" href="https://en.wikipedia.org/wiki/Braess%27s_paradox#Mathematical_approach">Braess network</a> as an example.</p>
<section id="Import-Modules">
<h2>Import Modules<a class="headerlink" href="#Import-Modules" title="Permalink to this headline">¶</a></h2>
<p>Import grapharray module.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">grapharray</span> <span class="k">as</span> <span class="nn">ga</span>
</pre></div>
</div>
</div>
</section>
<section id="Define-Variables">
<h2>Define Variables<a class="headerlink" href="#Define-Variables" title="Permalink to this headline">¶</a></h2>
<p>First, create a BaseGraph object, which describes the network on that variables are defined. It plays two roles when we define arrays:</p>
<ul class="simple">
<li><p>Identifying on which network the variable is defined</p></li>
<li><p>Memory of the network structure.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">BG</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">BaseGraph</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>BaseGraph class is a subclass of <a class="reference external" href="https://networkx.org/documentation/stable/reference/classes/digraph.html#networkx.DiGraph">networkx.DiGraph</a> so you can add edges and nodes to BaseGraph instance in the same way as to DiGraph.Note that GraphArray accepts any hashable objects as nodes, as does NetworkX.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">BG</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
<p>Then, freeze BaseGraph object to prevent being modified after defining variables.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">BG</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Finally, create NodeArray instance to define node variables or EdgeArray instance to define edge variables. We must pass a <strong>frozen</strong> BaseGraph object to array classes.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od_flow</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">NodeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">od_flow</span><span class="p">))</span>
<span class="n">edge_cost</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">edge_cost</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   0.0
A       0.0
B       0.0
end     0.0

index   value
(&#39;start&#39;, &#39;A&#39;)  0.0
(&#39;start&#39;, &#39;B&#39;)  0.0
(&#39;A&#39;, &#39;B&#39;)      0.0
(&#39;A&#39;, &#39;end&#39;)    0.0
(&#39;B&#39;, &#39;end&#39;)    0.0

</pre></div></div>
</div>
<p>These codes make variables defined on all nodes or edges of BG, all of whose values are zero.</p>
<p>You can set initial values of variables as you want by giving a keyword argument <code class="docutils literal notranslate"><span class="pre">init_val</span></code>. The argument <code class="docutils literal notranslate"><span class="pre">init_val</span></code> accepts several types of variables. if you want to set all initial values as the same value, simply give a scalar:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od_flow</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">NodeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">od_flow</span><span class="p">))</span>
<span class="n">edge_cost</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">edge_cost</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   10.0
A       10.0
B       10.0
end     10.0

index   value
(&#39;start&#39;, &#39;A&#39;)  10.0
(&#39;start&#39;, &#39;B&#39;)  10.0
(&#39;A&#39;, &#39;B&#39;)      10.0
(&#39;A&#39;, &#39;end&#39;)    10.0
(&#39;B&#39;, &#39;end&#39;)    10.0

</pre></div></div>
</div>
<p>or if you want to set each value in detail, give * a dictionary that has node- or edge- indexes as keys and initial values as values:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">od_flow</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">NodeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span>
    <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="mi">6</span>
<span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">od_flow</span><span class="p">))</span>
<span class="n">edge_cost</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="p">{</span>
    <span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">):</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">50</span> <span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">):</span> <span class="mi">50</span><span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">):</span> <span class="mi">0</span>
<span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">edge_cost</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   -6.0
A       0.0
B       0.0
end     6.0

index   value
(&#39;start&#39;, &#39;A&#39;)  0.0
(&#39;start&#39;, &#39;B&#39;)  50.0
(&#39;A&#39;, &#39;B&#39;)      10.0
(&#39;A&#39;, &#39;end&#39;)    50.0
(&#39;B&#39;, &#39;end&#39;)    0.0

</pre></div></div>
</div>
<ul class="simple">
<li><p>a NodeArray or EdgeArray object (initializing by them is faster than that by dictionary)</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">new_od_flow</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">NodeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="n">od_flow</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span><span class="p">))</span>
<span class="n">new_edge_cost</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="n">edge_cost</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_edge_cost</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   -6.0
A       0.0
B       0.0
end     6.0

index   value
(&#39;start&#39;, &#39;A&#39;)  0.0
(&#39;start&#39;, &#39;B&#39;)  50.0
(&#39;A&#39;, &#39;B&#39;)      10.0
(&#39;A&#39;, &#39;end&#39;)    50.0
(&#39;B&#39;, &#39;end&#39;)    0.0

</pre></div></div>
</div>
</section>
<section id="Update-array-values">
<h2>Update array values<a class="headerlink" href="#Update-array-values" title="Permalink to this headline">¶</a></h2>
<p>You can modify values after creating instances as we show below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">new_od_flow</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span><span class="p">))</span>
<span class="n">new_edge_cost</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_edge_cost</span><span class="p">))</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   -6.0
A       100.0
B       0.0
end     6.0

index   value
(&#39;start&#39;, &#39;A&#39;)  0.0
(&#39;start&#39;, &#39;B&#39;)  50.0
(&#39;A&#39;, &#39;B&#39;)      100.0
(&#39;A&#39;, &#39;end&#39;)    50.0
(&#39;B&#39;, &#39;end&#39;)    0.0

</pre></div></div>
</div>
</section>
<section id="Mathematical-Operations">
<h2>Mathematical Operations<a class="headerlink" href="#Mathematical-Operations" title="Permalink to this headline">¶</a></h2>
<p>NodeArray and EdgeArray objects can be added to, subtracted from, multiplied by and divided by another objects of the same classes.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">+</span> <span class="n">od_flow</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">-</span> <span class="n">od_flow</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">*</span> <span class="n">od_flow</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">/</span> <span class="n">od_flow</span><span class="p">))</span>  <span class="c1"># this raises warnings because of the zero division</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   -12.0
A       200.0
B       0.0
end     12.0

index   value
start   0.0
A       0.0
B       0.0
end     0.0

index   value
start   36.0
A       10000.0
B       0.0
end     36.0

index   value
start   1.0
A       1.0
B       nan
end     1.0

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/watanabe/pythonlib/grapharray/classes.py:260: RuntimeWarning: invalid value encountered in true_divide
  res_array = operation_func(other.array)
</pre></div></div>
</div>
<p>NodeArray and EdgeArray objects also operated with scalar values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">+</span> <span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">-</span> <span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">*</span> <span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_od_flow</span> <span class="o">/</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
index   value
start   -1.0
A       105.0
B       5.0
end     11.0

index   value
start   -11.0
A       95.0
B       -5.0
end     1.0

index   value
start   -30.0
A       500.0
B       0.0
end     30.0

index   value
start   -1.2
A       20.0
B       0.0
end     1.2

</pre></div></div>
</div>
</section>
<section id="Visualizing-Values">
<h2>Visualizing Values<a class="headerlink" href="#Visualizing-Values" title="Permalink to this headline">¶</a></h2>
<p>(Coming soon…)</p>
</section>
<section id="Computational-Efficiency">
<h2>Computational Efficiency<a class="headerlink" href="#Computational-Efficiency" title="Permalink to this headline">¶</a></h2>
<p>NodeArray and EdgeArray stores variables’ values as np.ndarray and the mathematical operations shown above are operated with these arrays.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">new_od_flow</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>  <span class="c1"># You can see the array by .array property.</span>
<span class="n">new_od_flow</span><span class="o">.</span><span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># .array is read-only</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_od_flow</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[ -6. 100.   0.   6.]
[-6.  5.  0.  6.]
</pre></div></div>
</div>
<p>Thus, these operation is as fast as that of np.ndarray. The larger the network is, the smaller the difference between the speed of these two methods are.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create a huge graph to show computational efficiency.</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">timeit</span>

<span class="n">BG</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">BaseGraph</span><span class="p">()</span>
<span class="n">BG</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20000</span><span class="p">):</span>
    <span class="n">edge</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">BG</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">BG</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="o">*</span><span class="n">edge</span><span class="p">)</span>
<span class="n">BG</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
<span class="n">timeit_args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;timer&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="mi">100000</span><span class="p">,</span> <span class="s1">&#39;globals&#39;</span><span class="p">:</span> <span class="nb">globals</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calculation with NodeArray ============&quot;</span><span class="p">)</span>
<span class="n">e1</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">NodeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">e2</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">NodeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span> <span class="o">=</span> <span class="mf">2.5739</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;e1 + e2&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">timeit_args</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calculation with np.ndarray =========&quot;</span><span class="p">)</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">array</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;a1 + a2&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">timeit_args</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
calculation with NodeArray ============
0.6202320000000001
calculation with np.ndarray =========
0.35947600000000035
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calculation with EdgeArray ============&quot;</span><span class="p">)</span>
<span class="n">e1</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">e2</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span> <span class="o">=</span> <span class="mf">2.5739</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;e1 + e2&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">timeit_args</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calculation with np.ndarray =========&quot;</span><span class="p">)</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">array</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;a1 + a2&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">timeit_args</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
calculation with EdgeArray ============
0.9205559999999999
calculation with np.ndarray =========
0.6567759999999998
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calculation with graphvar ============&quot;</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">EdgeArray</span><span class="p">(</span><span class="n">BG</span><span class="p">,</span> <span class="n">init_val</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">IncidenceMatrix</span><span class="p">(</span><span class="n">BG</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;A @ e&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">timeit_args</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;calculation with np.ndarray =========&quot;</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">array</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;A @ e&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">timeit_args</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
calculation with graphvar ============
5.071677
calculation with np.ndarray =========
4.934284
</pre></div></div>
</div>
<p>Specifically, these examples show that the performance degragations using GraphArray are constant regardless of the size of the network and the types of the operation. Thus, the degregation is almost zero in a large networks.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="grapharray.html" class="btn btn-neutral float-right" title="grapharray package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to grapharray’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Geb

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>